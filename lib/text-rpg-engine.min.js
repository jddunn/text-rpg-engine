!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define("text-rpg-engine",[],t):"object"==typeof exports?exports["text-rpg-engine"]=t():e["text-rpg-engine"]=t()}("undefined"!=typeof self?self:this,function(){return function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=1)}([function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.items=t}var t,n,r;return t=e,(n=[{key:"examine",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null!==e?this.items[e].getText:this.items.map(function(e){return e.name})}},{key:"addItem",value:function(e){return this.items.push(e),this.items}},{key:"dropItem",value:function(e){var t=this.items.filter(function(t){return t.name!==e});return this.items=t,this.items}}])&&o(t.prototype,n),r&&o(t,r),e}();t.default=r,e.exports=t.default},function(e,t,n){"use strict";var o;Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=new(((o=n(2))&&o.__esModule?o:{default:o}).default);t.default=r,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=l(n(3)),r=l(n(4)),i=l(n(5)),a=l(n(6)),u=l(n(0)),s=l(n(8));function l(e){return e&&e.__esModule?e:{default:e}}function f(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=[],o=!0,r=!1,i=void 0;try{for(var a,u=e[Symbol.iterator]();!(o=(a=u.next()).done)&&(n.push(a.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==u.return||u.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function c(e){return(c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var d=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.Display=new o.default,this.Input=new r.default,this.datapath=t,this.rooms=n,this.items=a,this.startRoom=u,this.endRoom=s,this.Player=new i.default(u=this.startRoom)}var t,n,l;return t=e,(n=[{key:"init",value:function(){var e;""!==this.dataPath&&console.log("Initialized game from: "+this.datapath),""===this.startRoom&&this.rooms.length>0&&(this.startRoom=this.rooms[0].name,this.Player.startRoom=this.startRoom,this.Player.currentRoom=this.Player.startRoom),""===this.endRoom&&this.rooms.length>1&&(this.endRoom=this.rooms[this.rooms.length-1].name);for(var t=0;t<this.rooms.length;t++)if(this.rooms[t].name===this.startRoom){e=this.rooms[t].getText;break}void 0===e&&(e="No starting room text found!"),this.Display.show(e)}},{key:"addRoom",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],r=new a.default(e,t,n,o);return this.rooms.push(r),r}},{key:"dropRoom",value:function(e){var t=this.rooms.filter(function(t){return t.name!==e});return this.rooms=t,this.rooms}},{key:"getRoom",value:function(e){return this.rooms.find(function(t){return t.name===e})}},{key:"addItem",value:function(e,t){var n=new s.default(e,t);return this.items.push(n),this.items}},{key:"dropItem",value:function(e){var t=this.items.filter(function(t){return t.name!==e});return this.items=t,this.items}},{key:"getItem",value:function(e){return this.items.find(function(t){return t.name===e})}},{key:"userSend",value:function(e){this.Input.send(e),this.decidePath(this.Input.value)}},{key:"decidePath",value:function(e){"restart"===e&&this.resetGame();var t=this,n=t.getRoom(t.Player.currentRoom);if(void 0!==c(n.prompts)){var o=!1;n.prompts.forEach(function(n){if(!1===o){var r=n.matchKeywords(e,t.Player.inventory.items);if(null!==r){if(o=!0,"success"in r&&(t.Display.show(r.success.successText),void 0!==r.success.itemsGiven&&Array.prototype.push.apply(t.Player.inventory.items,r.success.itemsGiven),void 0!==r.success.roomToEnter)){var i,a,u=f(t.Player.enterRoom(this.getRoom(r.success.roomToEnter)),2);a=u[0],i=u[1],r.success.roomToEnter===t.endRoom&&(i?t.win():t.Display.append(a))}if("fail"in r)return t.Display.show("".concat(n.results.failMessage)),void t.Display.append("Missing required items: ".concat(r.fail.toString()))}}else!1===o&&t.Display.show('<p>No actions could be done from: "'.concat(e,'". Try something else.</p>\n            ').concat(t.getRoom(t.Player.currentRoom).getText,"\n          "))})}else t.Display.show("<p>There doesn't seem to be any actions at all that you can do in this room.</p>\n                        ".concat(t.getRoom(t.Player.currentRoom).getText,"\n      "));console.log(e,this.Player)}},{key:"disableInput",value:function(){this.Input.disable()}},{key:"enableInput",value:function(){this.Input.enable()}},{key:"win",value:function(){for(var e=0;e<this.rooms.length;e++)this.rooms[e].name===this.endRoom&&(this.Display.append(this.rooms[e].getText),this.Display.append("<p>Game end.</p>"));this.disableInput()}},{key:"resetGame",value:function(){this.Player.inventory=new u.default,this.Player.currentRoom=this.startRoom;var e=this.getRoom(this.startRoom);this.Display.show(e.getText),this.Input.enable()}}])&&h(t.prototype,n),l&&h(t,l),e}();t.default=d,e.exports=t.default},function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"display";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.html=t,this.elementId=n}var t,n,r;return t=e,(n=[{key:"show",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;null===e?document.getElementById(this.elementId).innerHTML=this.html:(document.getElementById(this.elementId).innerHTML=e,this.html=e)}},{key:"append",value:function(e){document.getElementById(this.elementId).innerHTML+=e}}])&&o(t.prototype,n),r&&o(t,r),e}();t.default=r,e.exports=t.default},function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"input";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.disabled=t,this.value=n,this.elementId=o}var t,n,r;return t=e,(n=[{key:"enable",value:function(){this.disabled=!1,document.getElementById("input").disabled=!1}},{key:"disable",value:function(){this.disabled=!0,document.getElementById("input").disabled=!0}},{key:"send",value:function(e){e=e.toLowerCase(),this.value=e}}])&&o(t.prototype,n),r&&o(t,r),e}();t.default=r,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r=(o=n(0))&&o.__esModule?o:{default:o};function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new r.default,o=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments[3]);!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,""===this.name&&(this.name="player"),this.inventory=n,""===this.currentRoom&&(this.currentRoom=this.startRoom),this.startRoom=o}var t,n,o;return t=e,(n=[{key:"enterRoom",value:function(e){var t=e.enter(this.inventory.items);return!1===t[1]||(this.currentRoom=e.name),[t[0],t[1]]}},{key:"getItem",value:function(e){return this.inventory.addItem(e),this.inventory}},{key:"dropItem",value:function(e){return this.inventory.dropItem(e),this.inventory}},{key:"doAction",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return null===t?this.currentRoom.doAction(e):t.doAction(e)}}])&&i(t.prototype,n),o&&i(t,o),e}();t.default=a,e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o,r=(o=n(7))&&o.__esModule?o:{default:o};function i(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.getText=n,this.prompts=o,this.requirements=r}var t,n,o;return t=e,(n=[{key:"addPrompt",value:function(e,t,n){var o=new r.default(e,t,n);return this.prompts.push(o),this.prompts}},{key:"enter",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t="",n=!0;return this.requirements>0?0===e.length?(n=!1,this.requirements.forEach(function(e){t+="".concat(e.failText,". ")})):(this.requirements.forEach(function(e){var o=!1;this.items.forEach(function(t){t===e&&(o=!0)}),!1===o&&(n=!1,t+=e.failText)}),!0===n&&(t=this.getText)):t=this.getText,[t,n]}},{key:"doAction",value:function(e){var t={};return 0===this.prompts.length&&(t.text="There doesn't seem to be any actions you can do in this room."),Object.values(this.prompts).forEach(function(n,o){e===n&&(t.text=o.resultTextText,null!==o.resultTextItems&&(t.items=o.resultTextItems),null!==o.resultTextRoom&&(t.resultText=o.resultTextRoom))}),t}}])&&i(t.prototype,n),o&&i(t,o),e}();t.default=a,e.exports=t.default},function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.keywords=n.map(function(e){return e.toLowerCase()}),this.results=o,this.requirements=r}var t,n,r;return t=e,(n=[{key:"matchKeywords",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=!1;if(this.requirements.length>0){var o=[];if(this.requirements.forEach(function(e){var n=!1;t.forEach(function(t){t===e&&(n=!0)}),n||o.push(e)}),o.length>0)return{fail:o}}return this.keywords.forEach(function(t){e.includes(t.toLowerCase())&&(n=!0)}),n?{success:this.results}:null}}])&&o(t.prototype,n),r&&o(t,r),e}();t.default=r,e.exports=t.default},function(e,t,n){"use strict";function o(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.name=t,this.getText=n}var t,n,r;return t=e,(n=[{key:"get",value:function(){return this.getText}}])&&o(t.prototype,n),r&&o(t,r),e}();t.default=r,e.exports=t.default}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly90ZXh0LXJwZy1lbmdpbmUvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL3RleHQtcnBnLWVuZ2luZS93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly90ZXh0LXJwZy1lbmdpbmUvLi9zcmMvaW52ZW50b3J5LmpzIiwid2VicGFjazovL3RleHQtcnBnLWVuZ2luZS8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly90ZXh0LXJwZy1lbmdpbmUvLi9zcmMvZ2FtZS5qcyIsIndlYnBhY2s6Ly90ZXh0LXJwZy1lbmdpbmUvLi9zcmMvZGlzcGxheS5qcyIsIndlYnBhY2s6Ly90ZXh0LXJwZy1lbmdpbmUvLi9zcmMvaW5wdXQuanMiLCJ3ZWJwYWNrOi8vdGV4dC1ycGctZW5naW5lLy4vc3JjL3BsYXllci5qcyIsIndlYnBhY2s6Ly90ZXh0LXJwZy1lbmdpbmUvLi9zcmMvcm9vbS5qcyIsIndlYnBhY2s6Ly90ZXh0LXJwZy1lbmdpbmUvLi9zcmMvcHJvbXB0LmpzIiwid2VicGFjazovL3RleHQtcnBnLWVuZ2luZS8uL3NyYy9pdGVtLmpzIl0sIm5hbWVzIjpbInJvb3QiLCJmYWN0b3J5IiwiZXhwb3J0cyIsIm1vZHVsZSIsImRlZmluZSIsImFtZCIsInNlbGYiLCJ0aGlzIiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIkludmVudG9yeSIsIml0ZW1zIiwiYXJndW1lbnRzIiwibGVuZ3RoIiwidW5kZWZpbmVkIiwiX2NsYXNzQ2FsbENoZWNrIiwiaXRlbU5hbWUiLCJnZXRUZXh0IiwibWFwIiwiYSIsIml0ZW0iLCJwdXNoIiwibmV3SW52ZW50b3J5IiwiZmlsdGVyIiwiZGVmYXVsdCIsIl9kaXNwbGF5IiwiX2ludGVyb3BSZXF1aXJlRGVmYXVsdCIsIl9pbnB1dCIsIl9wbGF5ZXIiLCJfcm9vbSIsIl9pbnZlbnRvcnkiLCJfaXRlbSIsIkdhbWUiLCJkYXRhcGF0aCIsInJvb21zIiwic3RhcnRSb29tIiwiZW5kUm9vbSIsIkRpc3BsYXkiLCJJbnB1dCIsIlBsYXllciIsImRpc3BsYXlUZXh0IiwiZGF0YVBhdGgiLCJjb25zb2xlIiwibG9nIiwiY3VycmVudFJvb20iLCJzaG93IiwicHJvbXB0cyIsInJlcXVpcmVtZW50cyIsInJvb21PYmoiLCJyb29tTmFtZSIsIm5ld1Jvb21zIiwicm9vbSIsImZpbmQiLCJ4IiwibmV3SXRlbXMiLCJtZXNzYWdlIiwic2VuZCIsImRlY2lkZVBhdGgiLCJyZXNldEdhbWUiLCJfdGhpcyIsImN1cnJSb29tIiwiZ2V0Um9vbSIsIl90eXBlb2YiLCJmb3VuZFByb21wdCIsImZvckVhY2giLCJwcm9tcHQiLCJtYXRjaGluZ1Byb21wdFJlc3VsdHMiLCJtYXRjaEtleXdvcmRzIiwiaW52ZW50b3J5Iiwic3VjY2VzcyIsInN1Y2Nlc3NUZXh0IiwiaXRlbXNHaXZlbiIsIkFycmF5IiwiYXBwbHkiLCJyb29tVG9FbnRlciIsImVudGVyUm9vbVJlc3VsdFN1Y2Nlc3MiLCJlbnRlclJvb21SZXN1bHRUZXh0IiwiX3RoaXMkUGxheWVyJGVudGVyUm9vMiIsIl9zbGljZWRUb0FycmF5IiwiZW50ZXJSb29tIiwid2luIiwiYXBwZW5kIiwiY29uY2F0IiwicmVzdWx0cyIsImZhaWxNZXNzYWdlIiwiZmFpbCIsInRvU3RyaW5nIiwiZGlzYWJsZSIsImVuYWJsZSIsImRpc2FibGVJbnB1dCIsImh0bWwiLCJlbGVtZW50SWQiLCJkb2N1bWVudCIsImdldEVsZW1lbnRCeUlkIiwiaW5uZXJIVE1MIiwiZGlzYWJsZWQiLCJ0b0xvd2VyQ2FzZSIsInJlcyIsImVudGVyIiwiYWRkSXRlbSIsImRyb3BJdGVtIiwidGV4dCIsImRvQWN0aW9uIiwiX3Byb21wdCIsIlJvb20iLCJrZXl3b3JkcyIsInJlc3VsdFRleHRzIiwicmVzdWx0VGV4dCIsIm1ldEFsbFJlcXVpcmVtZW50cyIsInJlcXVpcmVtZW50IiwiZmFpbFRleHQiLCJmb3VuZCIsInZhbHVlcyIsInZhbCIsInJlc3VsdFRleHRUZXh0IiwicmVzdWx0VGV4dEl0ZW1zIiwicmVzdWx0VGV4dFJvb20iLCJQcm9tcHQiLCJ2IiwiZm91bmRLZXl3b3JkIiwibWlzc2luZ1JlcXVpcmVtZW50cyIsImZvdW5kUmVxdWlyZW1lbnQiLCJrZXl3b3JkIiwiaW5jbHVkZXMiLCJJdGVtIl0sIm1hcHBpbmdzIjoiQ0FBQSxTQUFBQSxFQUFBQyxHQUNBLGlCQUFBQyxTQUFBLGlCQUFBQyxPQUNBQSxPQUFBRCxRQUFBRCxJQUNBLG1CQUFBRyxlQUFBQyxJQUNBRCxPQUFBLHFCQUFBSCxHQUNBLGlCQUFBQyxRQUNBQSxRQUFBLG1CQUFBRCxJQUVBRCxFQUFBLG1CQUFBQyxJQVJBLENBU0Msb0JBQUFLLFVBQUFDLEtBQUEsV0FDRCxtQkNUQSxJQUFBQyxFQUFBLEdBR0EsU0FBQUMsRUFBQUMsR0FHQSxHQUFBRixFQUFBRSxHQUNBLE9BQUFGLEVBQUFFLEdBQUFSLFFBR0EsSUFBQUMsRUFBQUssRUFBQUUsR0FBQSxDQUNBQyxFQUFBRCxFQUNBRSxHQUFBLEVBQ0FWLFFBQUEsSUFVQSxPQU5BVyxFQUFBSCxHQUFBSSxLQUFBWCxFQUFBRCxRQUFBQyxJQUFBRCxRQUFBTyxHQUdBTixFQUFBUyxHQUFBLEVBR0FULEVBQUFELFFBMERBLE9BckRBTyxFQUFBTSxFQUFBRixFQUdBSixFQUFBTyxFQUFBUixFQUdBQyxFQUFBUSxFQUFBLFNBQUFmLEVBQUFnQixFQUFBQyxHQUNBVixFQUFBVyxF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WjVDLEVBQVlDLFVBQUFDLE9BQUEsUUFBQUMsSUFBQUYsVUFBQSxHQUFBQSxVQUFBLEdBQUosR0FDekIyRyxHQUFlLEVBRW5CLEdBQUlqSixLQUFLeUUsYUFBYWxDLE9BQVMsRUFBRyxDQUNoQyxJQUFJMkcsRUFBc0IsR0FlMUIsR0FiQWxKLEtBQUt5RSxhQUFhaUIsUUFBUSxTQUFTNkMsR0FDakMsSUFBSVksR0FBbUIsRUFDdkI5RyxFQUFNcUQsUUFBUSxTQUFTNUMsR0FDakJBLElBQVN5RixJQUNYWSxHQUFtQixLQUlsQkEsR0FDSEQsRUFBb0JuRyxLQUFLd0YsS0FJekJXLEVBQW9CM0csT0FBUyxFQUMvQixNQUFPLENBQUN3RSxLQUFRbUMsR0FXcEIsT0FOQWxKLEtBQUttSSxTQUFTekMsUUFBUSxTQUFTMEQsR0FDekJuRSxFQUFRb0UsU0FBU0QsRUFBUTFCLGlCQUMzQnVCLEdBQWUsS0FJZkEsRUFDSyxDQUFDbEQsUUFBVy9GLEtBQUs2RyxTQUVuQixvVkNqRFV5QyxhQUVuQixTQUFBQSxJQUFxQyxJQUF6QjNJLEVBQXlCMkIsVUFBQUMsT0FBQSxRQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBbEIsR0FBSUssRUFBY0wsVUFBQUMsT0FBQSxRQUFBQyxJQUFBRixVQUFBLEdBQUFBLFVBQUEsR0FBSixnR0FBSUcsQ0FBQXpDLEtBQUFzSixHQUNuQ3RKLEtBQUtXLEtBQU9BLEVBQ1pYLEtBQUsyQyxRQUFVQSx1REFJZixPQUFPM0MsS0FBSzJDIiwiZmlsZSI6InRleHQtcnBnLWVuZ2luZS5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KCk7XG5cdGVsc2UgaWYodHlwZW9mIGRlZmluZSA9PT0gJ2Z1bmN0aW9uJyAmJiBkZWZpbmUuYW1kKVxuXHRcdGRlZmluZShcInRleHQtcnBnLWVuZ2luZVwiLCBbXSwgZmFjdG9yeSk7XG5cdGVsc2UgaWYodHlwZW9mIGV4cG9ydHMgPT09ICdvYmplY3QnKVxuXHRcdGV4cG9ydHNbXCJ0ZXh0LXJwZy1lbmdpbmVcIl0gPSBmYWN0b3J5KCk7XG5cdGVsc2Vcblx0XHRyb290W1widGV4dC1ycGctZW5naW5lXCJdID0gZmFjdG9yeSgpO1xufSkodHlwZW9mIHNlbGYgIT09ICd1bmRlZmluZWQnID8gc2VsZiA6IHRoaXMsIGZ1bmN0aW9uKCkge1xucmV0dXJuICIsIiBcdC8vIFRoZSBtb2R1bGUgY2FjaGVcbiBcdHZhciBpbnN0YWxsZWRNb2R1bGVzID0ge307XG5cbiBcdC8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG4gXHRmdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cbiBcdFx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG4gXHRcdGlmKGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdKSB7XG4gXHRcdFx0cmV0dXJuIGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdLmV4cG9ydHM7XG4gXHRcdH1cbiBcdFx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcbiBcdFx0dmFyIG1vZHVsZSA9IGluc3RhbGxlZE1vZHVsZXNbbW9kdWxlSWRdID0ge1xuIFx0XHRcdGk6IG1vZHVsZUlkLFxuIFx0XHRcdGw6IGZhbHNlLFxuIFx0XHRcdGV4cG9ydHM6IHt9XG4gXHRcdH07XG5cbiBcdFx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG4gXHRcdG1vZHVsZXNbbW9kdWxlSWRdLmNhbGwobW9kdWxlLmV4cG9ydHMsIG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG4gXHRcdC8vIEZsYWcgdGhlIG1vZHVsZSBhcyBsb2FkZWRcbiBcdFx0bW9kdWxlLmwgPSB0cnVlO1xuXG4gXHRcdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG4gXHRcdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbiBcdH1cblxuXG4gXHQvLyBleHBvc2UgdGhlIG1vZHVsZXMgb2JqZWN0IChfX3dlYnBhY2tfbW9kdWxlc19fKVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5tID0gbW9kdWxlcztcblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGUgY2FjaGVcbiBcdF9fd2VicGFja19yZXF1aXJlX18uYyA9IGluc3RhbGxlZE1vZHVsZXM7XG5cbiBcdC8vIGRlZmluZSBnZXR0ZXIgZnVuY3Rpb24gZm9yIGhhcm1vbnkgZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kID0gZnVuY3Rpb24oZXhwb3J0cywgbmFtZSwgZ2V0dGVyKSB7XG4gXHRcdGlmKCFfX3dlYnBhY2tfcmVxdWlyZV9fLm8oZXhwb3J0cywgbmFtZSkpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgbmFtZSwgeyBlbnVtZXJhYmxlOiB0cnVlLCBnZXQ6IGdldHRlciB9KTtcbiBcdFx0fVxuIFx0fTtcblxuIFx0Ly8gZGVmaW5lIF9fZXNNb2R1bGUgb24gZXhwb3J0c1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yID0gZnVuY3Rpb24oZXhwb3J0cykge1xuIFx0XHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcbiBcdFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcbiBcdFx0fVxuIFx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xuIFx0fTtcblxuIFx0Ly8gY3JlYXRlIGEgZmFrZSBuYW1lc3BhY2Ugb2JqZWN0XG4gXHQvLyBtb2RlICYgMTogdmFsdWUgaXMgYSBtb2R1bGUgaWQsIHJlcXVpcmUgaXRcbiBcdC8vIG1vZGUgJiAyOiBtZXJnZSBhbGwgcHJvcGVydGllcyBvZiB2YWx1ZSBpbnRvIHRoZSBuc1xuIFx0Ly8gbW9kZSAmIDQ6IHJldHVybiB2YWx1ZSB3aGVuIGFscmVhZHkgbnMgb2JqZWN0XG4gXHQvLyBtb2RlICYgOHwxOiBiZWhhdmUgbGlrZSByZXF1aXJlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnQgPSBmdW5jdGlvbih2YWx1ZSwgbW9kZSkge1xuIFx0XHRpZihtb2RlICYgMSkgdmFsdWUgPSBfX3dlYnBhY2tfcmVxdWlyZV9fKHZhbHVlKTtcbiBcdFx0aWYobW9kZSAmIDgpIHJldHVybiB2YWx1ZTtcbiBcdFx0aWYoKG1vZGUgJiA0KSAmJiB0eXBlb2YgdmFsdWUgPT09ICdvYmplY3QnICYmIHZhbHVlICYmIHZhbHVlLl9fZXNNb2R1bGUpIHJldHVybiB2YWx1ZTtcbiBcdFx0dmFyIG5zID0gT2JqZWN0LmNyZWF0ZShudWxsKTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5yKG5zKTtcbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KG5zLCAnZGVmYXVsdCcsIHsgZW51bWVyYWJsZTogdHJ1ZSwgdmFsdWU6IHZhbHVlIH0pO1xuIFx0XHRpZihtb2RlICYgMiAmJiB0eXBlb2YgdmFsdWUgIT0gJ3N0cmluZycpIGZvcih2YXIga2V5IGluIHZhbHVlKSBfX3dlYnBhY2tfcmVxdWlyZV9fLmQobnMsIGtleSwgZnVuY3Rpb24oa2V5KSB7IHJldHVybiB2YWx1ZVtrZXldOyB9LmJpbmQobnVsbCwga2V5KSk7XG4gXHRcdHJldHVybiBucztcbiBcdH07XG5cbiBcdC8vIGdldERlZmF1bHRFeHBvcnQgZnVuY3Rpb24gZm9yIGNvbXBhdGliaWxpdHkgd2l0aCBub24taGFybW9ueSBtb2R1bGVzXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm4gPSBmdW5jdGlvbihtb2R1bGUpIHtcbiBcdFx0dmFyIGdldHRlciA9IG1vZHVsZSAmJiBtb2R1bGUuX19lc01vZHVsZSA/XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0RGVmYXVsdCgpIHsgcmV0dXJuIG1vZHVsZVsnZGVmYXVsdCddOyB9IDpcbiBcdFx0XHRmdW5jdGlvbiBnZXRNb2R1bGVFeHBvcnRzKCkgeyByZXR1cm4gbW9kdWxlOyB9O1xuIFx0XHRfX3dlYnBhY2tfcmVxdWlyZV9fLmQoZ2V0dGVyLCAnYScsIGdldHRlcik7XG4gXHRcdHJldHVybiBnZXR0ZXI7XG4gXHR9O1xuXG4gXHQvLyBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGxcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubyA9IGZ1bmN0aW9uKG9iamVjdCwgcHJvcGVydHkpIHsgcmV0dXJuIE9iamVjdC5wcm90b3R5cGUuaGFzT3duUHJvcGVydHkuY2FsbChvYmplY3QsIHByb3BlcnR5KTsgfTtcblxuIFx0Ly8gX193ZWJwYWNrX3B1YmxpY19wYXRoX19cbiBcdF9fd2VicGFja19yZXF1aXJlX18ucCA9IFwiXCI7XG5cblxuIFx0Ly8gTG9hZCBlbnRyeSBtb2R1bGUgYW5kIHJldHVybiBleHBvcnRzXG4gXHRyZXR1cm4gX193ZWJwYWNrX3JlcXVpcmVfXyhfX3dlYnBhY2tfcmVxdWlyZV9fLnMgPSAxKTtcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEludmVudG9yeSB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGl0ZW1zID0gW10pIHtcclxuICAgIHRoaXMuaXRlbXMgPSBpdGVtcztcclxuICB9XHJcbiAgXHJcbiAgZXhhbWluZShpdGVtTmFtZSA9IG51bGwpIHtcclxuICAgIC8vIElmIHdlJ3JlIGV4YW1pbmluZyBhbiBpdGVtXHJcbiAgICBpZiAoaXRlbU5hbWUgIT09IG51bGwpIHtcclxuICAgICAgLy8gRGlzcGxheSBpdGVtIGdldFRleHRcclxuICAgICAgcmV0dXJuIHRoaXMuaXRlbXNbaXRlbU5hbWVdLmdldFRleHQ7XHJcbiAgICB9XHJcbiAgICAvLyBJZiB3ZSdyZSBleGFtaW5pbmcgaW52ZW50b3J5LCBwcmludCBvdXRcclxuICAgIC8vIGxpc3Qgb2YgYWxsIHRoZSBpdGVtcy5cclxuICAgIHJldHVybiB0aGlzLml0ZW1zLm1hcChhID0+IGEubmFtZSk7XHJcbiAgfVxyXG5cclxuICBhZGRJdGVtKGl0ZW0pIHtcclxuICAgIHRoaXMuaXRlbXMucHVzaChpdGVtKTtcclxuICAgIHJldHVybiB0aGlzLml0ZW1zO1xyXG4gIH1cclxuXHJcbiAgZHJvcEl0ZW0oaXRlbU5hbWUpIHtcclxuICAgIGxldCBuZXdJbnZlbnRvcnkgPSB0aGlzLml0ZW1zLmZpbHRlcihmdW5jdGlvbihpdGVtKSB7XHJcbiAgICAgIHJldHVybiBpdGVtLm5hbWUgIT09IGl0ZW1OYW1lO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLml0ZW1zID0gbmV3SW52ZW50b3J5O1xyXG4gICAgcmV0dXJuIHRoaXMuaXRlbXM7XHJcbiAgfVxyXG59XHJcbiIsImltcG9ydCBHYW1lIGZyb20gJy4vZ2FtZSc7XHJcblxyXG5jb25zdCBnYW1lID0gbmV3IEdhbWUoKTtcclxuXHJcbmV4cG9ydCBkZWZhdWx0IGdhbWU7XHJcbiIsImltcG9ydCBEaXNwbGF5IGZyb20gJy4vZGlzcGxheSc7XHJcbmltcG9ydCBJbnB1dCBmcm9tICcuL2lucHV0JztcclxuaW1wb3J0IFBsYXllciBmcm9tICcuL3BsYXllcic7XHJcbmltcG9ydCBSb29tIGZyb20gJy4vcm9vbSc7XHJcbmltcG9ydCBJbnZlbnRvcnkgZnJvbSAnLi9pbnZlbnRvcnknO1xyXG5pbXBvcnQgSXRlbSBmcm9tICcuL2l0ZW0nO1xyXG4vLyBpbXBvcnQgSXRlbSBmcm9tICcuL2l0ZW0nO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2FtZSB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKGRhdGFwYXRoID0gJycsIHJvb21zID0gW10sIGl0ZW1zID0gW10sIHN0YXJ0Um9vbSA9ICcnLCBlbmRSb29tID0gJycpIHtcclxuICAgIHRoaXMuRGlzcGxheSA9IG5ldyBEaXNwbGF5KCk7XHJcbiAgICB0aGlzLklucHV0ID0gbmV3IElucHV0KCk7XHJcbiAgICB0aGlzLmRhdGFwYXRoID0gZGF0YXBhdGg7IC8vIFRPRE86IEJlIGFibGUgdG8gaGF2ZSBnYW1lIGluaXRpYWxpemUgZGF0YSBmcm9tIEpTT04gZmlsZVxyXG4gICAgdGhpcy5yb29tcyA9IHJvb21zOyAvLyBBbGwgdGhlIHJvb21zIGluIG91ciBnYW1lXHJcbiAgICB0aGlzLml0ZW1zID0gaXRlbXM7IC8vIEFsbCB0aGUgaXRlbXMgaW4gb3VyIGdhbWVcclxuICAgIHRoaXMuc3RhcnRSb29tID0gc3RhcnRSb29tOyAvLyBXaGljaCByb29tIHdpbGwgdGhlIHBsYXllciBzdGFydCBpblxyXG4gICAgdGhpcy5lbmRSb29tID0gZW5kUm9vbTsgLy8gV2hpY2ggcm9vbSBcclxuICAgIC8vIFRPRE86IEFsbG93IHBsYXllcnMgdG8gZ2l2ZSB0aGVpciBjaGFyYWN0ZXJzIHRoZWlyIG93biBuYW1lcyBsYXRlclxyXG4gICAgdGhpcy5QbGF5ZXIgPSBuZXcgUGxheWVyKHN0YXJ0Um9vbSA9IHRoaXMuc3RhcnRSb29tKTsgXHJcbiAgfVxyXG5cclxuICBpbml0KCkge1xyXG4gICAgbGV0IGRpc3BsYXlUZXh0O1xyXG4gICAgaWYgKHRoaXMuZGF0YVBhdGggIT09ICcnKSB7XHJcbiAgICAgIC8vIHRoaXMubG9hZERhdGEodGhpcy5kYXRhUGF0aCk7XHJcbiAgICAgIGNvbnNvbGUubG9nKCdJbml0aWFsaXplZCBnYW1lIGZyb206ICcgKyB0aGlzLmRhdGFwYXRoKTtcclxuICAgIH1cclxuICAgIGlmICh0aGlzLnN0YXJ0Um9vbSA9PT0gJycgJiYgdGhpcy5yb29tcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgIHRoaXMuc3RhcnRSb29tID0gdGhpcy5yb29tc1swXS5uYW1lOyBcclxuICAgICAgdGhpcy5QbGF5ZXIuc3RhcnRSb29tID0gdGhpcy5zdGFydFJvb207XHJcbiAgICAgIHRoaXMuUGxheWVyLmN1cnJlbnRSb29tID0gdGhpcy5QbGF5ZXIuc3RhcnRSb29tO1xyXG4gICAgfVxyXG4gICAgaWYgKHRoaXMuZW5kUm9vbSA9PT0gJycgJiYgdGhpcy5yb29tcy5sZW5ndGggPiAxKSB7XHJcbiAgICAgIHRoaXMuZW5kUm9vbSA9IHRoaXMucm9vbXNbdGhpcy5yb29tcy5sZW5ndGggLSAxXS5uYW1lOyAgICAgIFxyXG4gICAgfVxyXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCB0aGlzLnJvb21zLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgIGlmICh0aGlzLnJvb21zW2ldLm5hbWUgPT09IHRoaXMuc3RhcnRSb29tKSB7XHJcbiAgICAgICAgZGlzcGxheVRleHQgPSB0aGlzLnJvb21zW2ldLmdldFRleHQ7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgIH1cclxuICAgIGlmIChkaXNwbGF5VGV4dCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgIGRpc3BsYXlUZXh0ID0gJ05vIHN0YXJ0aW5nIHJvb20gdGV4dCBmb3VuZCEnO1xyXG4gICAgfVxyXG4gICAgdGhpcy5EaXNwbGF5LnNob3coZGlzcGxheVRleHQpO1xyXG4gIH1cclxuXHJcbiAgLy8gTWFuYWdlIHJvb21zXHJcbiAgYWRkUm9vbShuYW1lLCBnZXRUZXh0LCBwcm9tcHRzID0gW10sIHJlcXVpcmVtZW50cyA9IFtdKSB7XHJcbiAgICBsZXQgcm9vbU9iaiA9IG5ldyBSb29tKG5hbWUsIGdldFRleHQsIHByb21wdHMsIHJlcXVpcmVtZW50cyk7XHJcbiAgICB0aGlzLnJvb21zLnB1c2gocm9vbU9iaik7XHJcbiAgICByZXR1cm4gcm9vbU9iajtcclxuICB9XHJcblxyXG4gIGRyb3BSb29tKHJvb21OYW1lKSB7XHJcbiAgICBsZXQgbmV3Um9vbXMgPSB0aGlzLnJvb21zLmZpbHRlcihmdW5jdGlvbihyb29tKSB7XHJcbiAgICAgIHJldHVybiByb29tLm5hbWUgIT09IHJvb21OYW1lO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLnJvb21zID0gbmV3Um9vbXM7XHJcbiAgICByZXR1cm4gdGhpcy5yb29tcztcclxuICB9XHJcblxyXG4gIGdldFJvb20ocm9vbU5hbWUpIHtcclxuICAgIGNvbnN0IHJvb20gPSB0aGlzLnJvb21zLmZpbmQoeCA9PiB4Lm5hbWUgPT09IHJvb21OYW1lKTtcclxuICAgIHJldHVybiByb29tO1xyXG4gIH1cclxuXHJcbiAgLy8gTWFuYWdlIGl0ZW1zXHJcbiAgYWRkSXRlbShuYW1lLCBnZXRUZXh0KSB7XHJcbiAgICBjb25zdCBpdGVtID0gbmV3IEl0ZW0obmFtZSwgZ2V0VGV4dCk7XHJcbiAgICB0aGlzLml0ZW1zLnB1c2goaXRlbSk7XHJcbiAgICByZXR1cm4gdGhpcy5pdGVtcztcclxuICB9XHJcblxyXG4gIGRyb3BJdGVtKGl0ZW1OYW1lKSB7XHJcbiAgICBsZXQgbmV3SXRlbXMgPSB0aGlzLml0ZW1zLmZpbHRlcihmdW5jdGlvbihpdGVtKSB7XHJcbiAgICAgIHJldHVybiBpdGVtLm5hbWUgIT09IGl0ZW1OYW1lO1xyXG4gICAgfSk7XHJcbiAgICB0aGlzLml0ZW1zID0gbmV3SXRlbXM7XHJcbiAgICByZXR1cm4gdGhpcy5pdGVtcztcclxuICB9XHJcblxyXG4gIGdldEl0ZW0oaXRlbU5hbWUpIHtcclxuICAgIGNvbnN0IGl0ZW0gPSB0aGlzLml0ZW1zLmZpbmQoeCA9PiB4Lm5hbWUgPT09IGl0ZW1OYW1lKTtcclxuICAgIHJldHVybiBpdGVtO1xyXG4gIH1cclxuXHJcbiAgLy8gVXNlciBpbnB1dFxyXG4gIHVzZXJTZW5kKG1lc3NhZ2UpIHtcclxuICAgIC8vIE91ciBJbnB1dCBjbGFzcyB3aWxsIGhhbmRsZSBjbGVhbmluZyAvIG5vcm1hbGl6aW5nIHN0cmluZ3NcclxuICAgIHRoaXMuSW5wdXQuc2VuZChtZXNzYWdlKTtcclxuICAgIHRoaXMuZGVjaWRlUGF0aCh0aGlzLklucHV0LnZhbHVlKTtcclxuICB9XHJcblxyXG4gIC8vIEdhbWUgQUlcclxuICBkZWNpZGVQYXRoKG1lc3NhZ2UpIHtcclxuICAgIGlmIChtZXNzYWdlID09PSAncmVzdGFydCcpIHtcclxuICAgICAgdGhpcy5yZXNldEdhbWUoKTtcclxuICAgIH1cclxuICAgIGNvbnN0IF90aGlzID0gdGhpcztcclxuICAgIGNvbnN0IGN1cnJSb29tID0gX3RoaXMuZ2V0Um9vbShfdGhpcy5QbGF5ZXIuY3VycmVudFJvb20pO1xyXG4gICAgLy8gRG8gd2UgaGF2ZSBhY3Rpb25zIHRoYXQgd2UgY2FuIGRvIGluIHRoZSByb29tP1xyXG4gICAgaWYgKHR5cGVvZiBjdXJyUm9vbS5wcm9tcHRzICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgLy8gQ2hlY2sgZXZlcnkgcHJvbXB0IGFjdGlvbiB0byBzZWUgaWYgaXQgbWF0Y2hlcyBvdXIgaW5wdXQga2V5d29yZHNcclxuICAgICAgLy8gRm9yIG5vdyBqdXN0IGdldCB0aGUgZmlyc3QgbWF0Y2hpbmcgcHJvbXB0IGFuZCBkbyB0aGF0XHJcbiAgICAgIGxldCBmb3VuZFByb21wdCA9IGZhbHNlO1xyXG4gICAgICBjdXJyUm9vbS5wcm9tcHRzLmZvckVhY2goZnVuY3Rpb24gKHByb21wdCkge1xyXG4gICAgICAgIGlmIChmb3VuZFByb21wdCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgIGNvbnN0IG1hdGNoaW5nUHJvbXB0UmVzdWx0cyA9IHByb21wdC5tYXRjaEtleXdvcmRzKG1lc3NhZ2UsIF90aGlzLlBsYXllci5pbnZlbnRvcnkuaXRlbXMpO1xyXG4gICAgICAgICAgLy8gSWYgd2UgZ2V0IGEgbWF0Y2hpbmcgcmVzdWx0IGJhY2tcclxuICAgICAgICAgIGlmIChtYXRjaGluZ1Byb21wdFJlc3VsdHMgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgZm91bmRQcm9tcHQgPSB0cnVlO1xyXG4gICAgICAgICAgICAvLyBJZiBwbGF5ZXIgc3VjY2VlZGVkIGluIHByb21wdCBhY3Rpb25cclxuICAgICAgICAgICAgaWYgKCdzdWNjZXNzJyBpbiBtYXRjaGluZ1Byb21wdFJlc3VsdHMpIHtcclxuICAgICAgICAgICAgICBfdGhpcy5EaXNwbGF5LnNob3cobWF0Y2hpbmdQcm9tcHRSZXN1bHRzLnN1Y2Nlc3Muc3VjY2Vzc1RleHQpO1xyXG4gICAgICAgICAgICAgIC8vIEdldCBpdGVtcyBmcm9tIHByb21wdCBpZiBhbnkgYXJlIGZvdW5kXHJcbiAgICAgICAgICAgICAgaWYgKG1hdGNoaW5nUHJvbXB0UmVzdWx0cy5zdWNjZXNzLml0ZW1zR2l2ZW4gIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgQXJyYXkucHJvdG90eXBlLnB1c2guYXBwbHkoX3RoaXMuUGxheWVyLmludmVudG9yeS5pdGVtcywgbWF0Y2hpbmdQcm9tcHRSZXN1bHRzLnN1Y2Nlc3MuaXRlbXNHaXZlbik7XHJcbiAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIC8vIFN1Y2Nlc3NmdWwgcHJvbXB0IGxlYWRzIHRvIG5ldyByb29tIGVudHJhbmNlIChpZiBkZWZpbmVkIGluIHByb21wdClcclxuICAgICAgICAgICAgICBpZiAobWF0Y2hpbmdQcm9tcHRSZXN1bHRzLnN1Y2Nlc3Mucm9vbVRvRW50ZXIgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICAgICAgbGV0IGVudGVyUm9vbVJlc3VsdFN1Y2Nlc3M7XHJcbiAgICAgICAgICAgICAgICBsZXQgZW50ZXJSb29tUmVzdWx0VGV4dDsgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgW2VudGVyUm9vbVJlc3VsdFRleHQsIGVudGVyUm9vbVJlc3VsdFN1Y2Nlc3NdID0gXHJcbiAgICAgICAgICAgICAgICAgICAgICBfdGhpcy5QbGF5ZXIuZW50ZXJSb29tKHRoaXMuZ2V0Um9vbShtYXRjaGluZ1Byb21wdFJlc3VsdHMuc3VjY2Vzcy5yb29tVG9FbnRlcikpO1xyXG4gICAgICAgICAgICAgICAgLy8gQ2hlY2sgdG8gc2VlIGlmIHBsYXllcidzIHdvblxyXG4gICAgICAgICAgICAgICAgaWYgKG1hdGNoaW5nUHJvbXB0UmVzdWx0cy5zdWNjZXNzLnJvb21Ub0VudGVyID09PSBfdGhpcy5lbmRSb29tKSB7XHJcbiAgICAgICAgICAgICAgICAgIGlmIChlbnRlclJvb21SZXN1bHRTdWNjZXNzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gU3VjY2Vzc2Z1bGx5IGVudGVyZWQgcm9vbSB0byB3aW4gZ2FtZVxyXG4gICAgICAgICAgICAgICAgICAgIF90aGlzLndpbigpO1xyXG4gICAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIERpc3BsYXkgcmVzdWx0cyB0ZXh0IChmYWlsIHRvIGVudGVyIHdpbm5pbmcgcm9vbSlcclxuICAgICAgICAgICAgICAgICAgICBfdGhpcy5EaXNwbGF5LmFwcGVuZChlbnRlclJvb21SZXN1bHRUZXh0KTtcclxuICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBQbGF5ZXIgZmFpbGVkIHRvIGRvIHByb21wdCAobWlzc2luZyBpdGVtIHJlcXVpcmVtZW50KVxyXG4gICAgICAgICAgICBpZiAoJ2ZhaWwnIGluIG1hdGNoaW5nUHJvbXB0UmVzdWx0cykge1xyXG4gICAgICAgICAgICAgIF90aGlzLkRpc3BsYXkuc2hvdyhgJHtwcm9tcHQucmVzdWx0cy5mYWlsTWVzc2FnZX1gKTtcclxuICAgICAgICAgICAgICBfdGhpcy5EaXNwbGF5LmFwcGVuZChgTWlzc2luZyByZXF1aXJlZCBpdGVtczogJHttYXRjaGluZ1Byb21wdFJlc3VsdHMuZmFpbC50b1N0cmluZygpfWApO1xyXG4gICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICBpZiAoZm91bmRQcm9tcHQgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgIC8vIFBsYXllciBkaWRuJ3Qgc2F5IGFueSBrZXl3b3JkcyB0aGF0IHRyaWdnZXJlZCBhbnkgb2YgdGhlIGN1cnJlbnQgcm9vbSBwcm9tcHRzXHJcbiAgICAgICAgICAgIF90aGlzLkRpc3BsYXkuc2hvdyhgPHA+Tm8gYWN0aW9ucyBjb3VsZCBiZSBkb25lIGZyb206IFwiJHttZXNzYWdlfVwiLiBUcnkgc29tZXRoaW5nIGVsc2UuPC9wPlxyXG4gICAgICAgICAgICAke190aGlzLmdldFJvb20oX3RoaXMuUGxheWVyLmN1cnJlbnRSb29tKS5nZXRUZXh0fVxyXG4gICAgICAgICAgYCk7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIC8vIE5vIHByb21wdHMgZXhpc3QgZm9yIHRoZSBjdXJyZW50IHJvb21cclxuICAgICAgX3RoaXMuRGlzcGxheS5zaG93KGA8cD5UaGVyZSBkb2Vzbid0IHNlZW0gdG8gYmUgYW55IGFjdGlvbnMgYXQgYWxsIHRoYXQgeW91IGNhbiBkbyBpbiB0aGlzIHJvb20uPC9wPlxyXG4gICAgICAgICAgICAgICAgICAgICAgICAke190aGlzLmdldFJvb20oX3RoaXMuUGxheWVyLmN1cnJlbnRSb29tKS5nZXRUZXh0fVxyXG4gICAgICBgKTtcclxuICAgIH1cclxuICAgIGNvbnNvbGUubG9nKG1lc3NhZ2UsIHRoaXMuUGxheWVyKTtcclxuICB9XHJcblxyXG4gIGRpc2FibGVJbnB1dCgpIHtcclxuICAgIHRoaXMuSW5wdXQuZGlzYWJsZSgpO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlSW5wdXQoKSB7XHJcbiAgICB0aGlzLklucHV0LmVuYWJsZSgpO1xyXG4gIH1cclxuXHJcbiAgLy8gUGxheWVyIHdpbnNcclxuICB3aW4oKSB7XHJcbiAgICAvLyBTaG93IGZpbmFsIHJvb20gdGV4dCAod2luIHRleHQpXHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IHRoaXMucm9vbXMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgaWYgKHRoaXMucm9vbXNbaV0ubmFtZSA9PT0gdGhpcy5lbmRSb29tKSB7XHJcbiAgICAgICAgdGhpcy5EaXNwbGF5LmFwcGVuZCh0aGlzLnJvb21zW2ldLmdldFRleHQpO1xyXG4gICAgICAgIHRoaXMuRGlzcGxheS5hcHBlbmQoJzxwPkdhbWUgZW5kLjwvcD4nKTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gRGlzYWJsZSBhbnkgbW9yZSB1c2VyIGlucHV0IGFmdGVyIHdpbm5pbmdcclxuICAgIHRoaXMuZGlzYWJsZUlucHV0KCk7XHJcbiAgfVxyXG5cclxuICAvLyBQbGF5ZXIgcmVzZXRzIGdhbWVcclxuICByZXNldEdhbWUoKSB7XHJcbiAgICAvLyBSZXNldHMgcGxheWVyIHdpdGggYmxhbmsgaW52ZW50b3J5IGFuZCBiYWNrIHRvIHN0YXJ0aW5nIHJvb21cclxuICAgIHRoaXMuUGxheWVyLmludmVudG9yeSA9IG5ldyBJbnZlbnRvcnkoKTtcclxuICAgIHRoaXMuUGxheWVyLmN1cnJlbnRSb29tID0gdGhpcy5zdGFydFJvb207XHJcbiAgICBjb25zdCByb29tID0gdGhpcy5nZXRSb29tKHRoaXMuc3RhcnRSb29tKTtcclxuICAgIHRoaXMuRGlzcGxheS5zaG93KHJvb20uZ2V0VGV4dCk7XHJcbiAgICB0aGlzLklucHV0LmVuYWJsZSgpO1xyXG4gIH1cclxufVxyXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBEaXNwbGF5IHtcclxuXHJcbiAgY29uc3RydWN0b3IoaHRtbCA9ICcnLCBlbGVtZW50SWQgPSAnZGlzcGxheScpIHtcclxuICAgIHRoaXMuaHRtbCA9IGh0bWw7XHJcbiAgICB0aGlzLmVsZW1lbnRJZCA9IGVsZW1lbnRJZDtcclxuICB9XHJcblxyXG4gIHNob3coaHRtbCA9IG51bGwpIHtcclxuICAgIGlmIChodG1sID09PSBudWxsKSB7XHJcbiAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZWxlbWVudElkKS5pbm5lckhUTUwgPSB0aGlzLmh0bWw7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmVsZW1lbnRJZCkuaW5uZXJIVE1MID0gaHRtbDtcclxuICAgICAgdGhpcy5odG1sID0gaHRtbDtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIGFwcGVuZChodG1sKSB7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLmVsZW1lbnRJZCkuaW5uZXJIVE1MICs9IGh0bWw7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIElucHV0IHtcclxuXHJcbiAgY29uc3RydWN0b3IoZGlzYWJsZWQgPSBmYWxzZSwgdmFsdWUgPSAnJywgZWxlbWVudElkID0gJ2lucHV0Jykge1xyXG4gICAgdGhpcy5kaXNhYmxlZCA9IGRpc2FibGVkO1xyXG4gICAgdGhpcy52YWx1ZSA9IHZhbHVlO1xyXG4gICAgdGhpcy5lbGVtZW50SWQgPSBlbGVtZW50SWQ7XHJcbiAgfVxyXG5cclxuICBlbmFibGUoKSB7XHJcbiAgICB0aGlzLmRpc2FibGVkID0gZmFsc2U7XHJcbiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5wdXQnKS5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gIH1cclxuXHJcbiAgZGlzYWJsZSgpIHtcclxuICAgIHRoaXMuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lucHV0JykuZGlzYWJsZWQgPSB0cnVlO1xyXG4gIH1cclxuXHJcbiAgc2VuZCh2YWx1ZSkge1xyXG4gICAgLy8gTm9ybWFsaXplIGlucHV0IHZhbHVlcyAoaWYgZGVzaXJlZClcclxuICAgIHZhbHVlID0gdmFsdWUudG9Mb3dlckNhc2UoKTtcclxuICAgIHRoaXMudmFsdWUgPSB2YWx1ZTtcclxuICB9XHJcbn1cclxuIiwiaW1wb3J0IEludmVudG9yeSBmcm9tICcuL2ludmVudG9yeSc7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQbGF5ZXIge1xyXG5cclxuICBjb25zdHJ1Y3RvcihuYW1lID0gJycsIGludmVudG9yeSA9IG5ldyBJbnZlbnRvcnkoKSwgY3VycmVudFJvb20gPSAnJywgc3RhcnRSb29tKSB7XHJcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgaWYgKHRoaXMubmFtZSA9PT0gJycpIHtcclxuICAgICAgdGhpcy5uYW1lID0gJ3BsYXllcic7XHJcbiAgICB9XHJcbiAgICB0aGlzLmludmVudG9yeSA9IGludmVudG9yeTtcclxuICAgIGlmICh0aGlzLmN1cnJlbnRSb29tID09PSAnJykge1xyXG4gICAgICB0aGlzLmN1cnJlbnRSb29tID0gdGhpcy5zdGFydFJvb207XHJcbiAgICB9XHJcbiAgICB0aGlzLnN0YXJ0Um9vbSA9IHN0YXJ0Um9vbTtcclxuICB9XHJcbiAgXHJcbiAgZW50ZXJSb29tKHJvb20pIHtcclxuICAgIGNvbnN0IHJlcyA9IHJvb20uZW50ZXIodGhpcy5pbnZlbnRvcnkuaXRlbXMpO1xyXG4gICAgaWYgKHJlc1sxXSA9PT0gZmFsc2UpIHtcclxuICAgICAgLy8gUGxheWVyIGRpZCBub3QgaGF2ZSByZXF1aXJlZCBpdGVtcyB0byBlbnRlciB0aGUgcm9vbVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgLy8gRW50ZXJlZCByb29tIHN1Y2Nlc3NmdWxseVxyXG4gICAgICB0aGlzLmN1cnJlbnRSb29tID0gcm9vbS5uYW1lOyBcclxuICAgIH1cclxuICAgIC8vIFJldHVybiBnYW1lIHRleHQgYW5kIHdoZXRoZXIgb3Igbm90IHdlIHdlcmUgYWJsZSB0byBlbnRlciByb29tXHJcbiAgICByZXR1cm4gW3Jlc1swXSwgcmVzWzFdXTtcclxuICB9XHJcblxyXG4gIGdldEl0ZW0oaXRlbSkge1xyXG4gICAgdGhpcy5pbnZlbnRvcnkuYWRkSXRlbShpdGVtKTtcclxuICAgIHJldHVybiB0aGlzLmludmVudG9yeTtcclxuICB9XHJcblxyXG4gIGRyb3BJdGVtKGl0ZW0pIHtcclxuICAgIHRoaXMuaW52ZW50b3J5LmRyb3BJdGVtKGl0ZW0pO1xyXG4gICAgcmV0dXJuIHRoaXMuaW52ZW50b3J5O1xyXG4gIH1cclxuXHJcbiAgZG9BY3Rpb24odGV4dCwgaXRlbSA9IG51bGwpIHtcclxuICAgIC8vIE5vIGl0ZW0gcGFzc2VkLCBjaGVjayByb29tIHByb21wdHMgZm9yIGFjdGlvbnNcclxuICAgIGlmIChpdGVtID09PSBudWxsKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLmN1cnJlbnRSb29tLmRvQWN0aW9uKHRleHQpO1xyXG4gICAgfVxyXG4gICAgLy8gRG9pbmcgYWN0aW9uIG9uIGl0ZW0sIGNoZWNrIGl0ZW0gcHJvbXB0c1xyXG4gICAgcmV0dXJuIGl0ZW0uZG9BY3Rpb24odGV4dCk7XHJcbiAgfVxyXG59XHJcbiAgXHJcbiIsImltcG9ydCBQcm9tcHQgZnJvbSAnLi9wcm9tcHQnO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUm9vbSB7XHJcblxyXG4gIGNvbnN0cnVjdG9yKG5hbWUgPSAnJywgZ2V0VGV4dCA9ICcnLCBwcm9tcHRzID0gW10sIHJlcXVpcmVtZW50cyA9IFtdKSB7XHJcbiAgICB0aGlzLm5hbWUgPSBuYW1lO1xyXG4gICAgdGhpcy5nZXRUZXh0ID0gZ2V0VGV4dDsgLy8gVGhlIHRleHQgdGhhdCBpcyBkaXNwbGF5ZWQgd2hlbiB0aGUgcm9vbSBpcyBlbnRlcmVkXHJcbiAgICB0aGlzLnByb21wdHMgPSBwcm9tcHRzOyAvLyBXaGF0IGFyZSB0aGUgYWN0aW9ucyB0aGF0IHdlIGNhbiBkbyBpbiB0aGlzIHJvb20/XHJcbiAgICB0aGlzLnJlcXVpcmVtZW50cyA9IHJlcXVpcmVtZW50czsgLy8gQW55IHJlcXVpcmVtZW50cyAoaXRlbXMpIG5lZWRlZCB0byBhY2Nlc3MgdGhlIHJvb21cclxuICB9XHJcblxyXG4gIGFkZFByb21wdChuYW1lLCBrZXl3b3JkcywgcmVzdWx0VGV4dHMpIHtcclxuICAgIGNvbnN0IHByb21wdCA9IG5ldyBQcm9tcHQobmFtZSwga2V5d29yZHMsIHJlc3VsdFRleHRzKTtcclxuICAgIHRoaXMucHJvbXB0cy5wdXNoKHByb21wdCk7XHJcbiAgICByZXR1cm4gdGhpcy5wcm9tcHRzO1xyXG4gIH1cclxuXHJcbiAgZW50ZXIoaXRlbXMgPSBbXSkge1xyXG4gICAgbGV0IHJlc3VsdFRleHQgPSAnJztcclxuICAgIGxldCBtZXRBbGxSZXF1aXJlbWVudHMgPSB0cnVlOyAvLyBDYW4gd2UgZW50ZXIgdGhlIHJvb20/XHJcbiAgICAvLyBUaGUgcm9vbSBpcyBub3QgYWNjZXNzaWJsZSBieSBkZWZhdWx0XHJcbiAgICBpZiAodGhpcy5yZXF1aXJlbWVudHMgPiAwKSB7XHJcbiAgICAgIGlmIChpdGVtcy5sZW5ndGggPT09IDApIHtcclxuICAgICAgICBtZXRBbGxSZXF1aXJlbWVudHMgPSBmYWxzZTtcclxuICAgICAgICAvLyBSZXR1cm4gbWlzc2luZyByZXF1aXJlbWVudCBtZXNzYWdlc1xyXG4gICAgICAgIHRoaXMucmVxdWlyZW1lbnRzLmZvckVhY2goZnVuY3Rpb24gKHJlcXVpcmVtZW50KSB7XHJcbiAgICAgICAgICByZXN1bHRUZXh0ICs9IGAke3JlcXVpcmVtZW50LmZhaWxUZXh0fS4gYDtcclxuICAgICAgICB9KTtcclxuICAgICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBDaGVjayB0aGUgcm9vbSdzIHJlcXVpcmVtZW50cyBmb3IgbWF0Y2hpbmcgaXRlbXNcclxuICAgICAgICB0aGlzLnJlcXVpcmVtZW50cy5mb3JFYWNoKGZ1bmN0aW9uIChyZXF1aXJlbWVudCkge1xyXG4gICAgICAgICAgbGV0IGZvdW5kID0gZmFsc2U7XHJcbiAgICAgICAgICB0aGlzLml0ZW1zLmZvckVhY2goZnVuY3Rpb24gKGl0ZW0pIHtcclxuICAgICAgICAgICAgaWYgKGl0ZW0gPT09IHJlcXVpcmVtZW50KSB7XHJcbiAgICAgICAgICAgICAgZm91bmQgPSB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICB9KTtcclxuICAgICAgICAgIGlmIChmb3VuZCA9PT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgbWV0QWxsUmVxdWlyZW1lbnRzID0gZmFsc2U7XHJcbiAgICAgICAgICAgIC8vIFJldHVybiBmYWlsIG1lc3NhZ2VzIGZvciBtaXNzaW5nIHJlcXVpcmVtZW50c1xyXG4gICAgICAgICAgICByZXN1bHRUZXh0ICs9IHJlcXVpcmVtZW50LmZhaWxUZXh0OyAgXHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgaWYgKG1ldEFsbFJlcXVpcmVtZW50cyA9PT0gdHJ1ZSkge1xyXG4gICAgICAgICAgcmVzdWx0VGV4dCA9IHRoaXMuZ2V0VGV4dDtcclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJlc3VsdFRleHQgPSB0aGlzLmdldFRleHQ7XHJcbiAgICB9XHJcbiAgICAvLyBSZXR1cm4gdGV4dCB3aXRoIHJlc3VsdFRleHRzIGFuZCB3aGV0aGVyIG9yIG5vdCByb29tIGNvdWxkIGJlIGVudGVyZWRcclxuICAgIHJldHVybiBbcmVzdWx0VGV4dCwgbWV0QWxsUmVxdWlyZW1lbnRzXTtcclxuICB9XHJcblxyXG4gIGRvQWN0aW9uKHZhbHVlKSB7XHJcbiAgICAvLyBGb3Igbm93IGxldCdzIG9ubHkgZG8gb25lIGFjdGlvbiBhdCBhIHRpbWVcclxuICAgIGxldCByZXN1bHRUZXh0ID0ge307XHJcbiAgICBpZiAodGhpcy5wcm9tcHRzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICByZXN1bHRUZXh0Wyd0ZXh0J10gPSBcIlRoZXJlIGRvZXNuJ3Qgc2VlbSB0byBiZSBhbnkgYWN0aW9ucyB5b3UgY2FuIGRvIGluIHRoaXMgcm9vbS5cIjtcclxuICAgIH1cclxuICAgIE9iamVjdC52YWx1ZXModGhpcy5wcm9tcHRzKS5mb3JFYWNoKGZ1bmN0aW9uKGtleSwgdmFsKSB7IFxyXG4gICAgICBpZiAodmFsdWUgPT09IGtleSkge1xyXG4gICAgICAgIHJlc3VsdFRleHRbJ3RleHQnXSA9IHZhbC5yZXN1bHRUZXh0VGV4dDsgLy8gU3VjY2Vzc2Z1bCBhY3Rpb24gcmV0dXJuaW5nIHJlc3VsdFRleHRpbmcgdGV4dFxyXG4gICAgICAgIGlmICh2YWwucmVzdWx0VGV4dEl0ZW1zICE9PSBudWxsKSB7XHJcbiAgICAgICAgICByZXN1bHRUZXh0WydpdGVtcyddID0gdmFsLnJlc3VsdFRleHRJdGVtczsgLy8gU3VjY2Vzc2Z1bCBhY3Rpb24gcmVzdWx0VGV4dGluZyBpbiBuZXcgaXRlbXNcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHZhbC5yZXN1bHRUZXh0Um9vbSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgcmVzdWx0VGV4dFsncmVzdWx0VGV4dCddID0gdmFsLnJlc3VsdFRleHRSb29tOyAvLyBTdWNjZXNzZnVsIGFjdGlvbiByZXN1bHRUZXh0aW5nIGluIGEgbmV3IHJvb21cclxuICAgICAgICB9XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgcmV0dXJuIHJlc3VsdFRleHQ7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFByb21wdCB7XHJcbiAgIFxyXG4gIGNvbnN0cnVjdG9yKG5hbWUgPSAnJywga2V5d29yZHMgPSBbXSwgcmVzdWx0cyA9IHt9LCByZXF1aXJlbWVudHMgPSBbXSkge1xyXG4gICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgIC8vIEtleXdvcmRzIHRoYXQgY2FuIHRyaWdnZXIgdGhlIHByb21wdCAobWFrZSBhbGwgbG93ZXItY2FzZSBieSBkZWZhdWx0KVxyXG4gICAgdGhpcy5rZXl3b3JkcyA9IGtleXdvcmRzLm1hcChmdW5jdGlvbih2KSB7IHJldHVybiB2LnRvTG93ZXJDYXNlKCk7fSk7IFxyXG4gICAgLy8gUmVzdWx0cyB0aGF0IG9jY3VyIHdoZW4gdGhpcyBwcm9tcHQgaXMgc3VjY2Vzc2Z1bGx5IHRyaWdnZXJlZDsgXHJcbiAgICAvLyB0aGUgcmVzdWx0IGtleXMgY29tcHJpc2Ugb2Yg4oCcc3VjY2Vzc1RleHTigJ0gKHJlcXVpcmVkKSwgXCJmYWlsVGV4dFwiIChvcHRpb25hbCksXHJcbiAgICAvLyDigJxpdGVtc1JlcXVpcmVk4oCdIChvcHRpb25hbCksIC8vIGFuZCDigJxyb29tVG9FbnRlclwi4oCdIFxyXG4gICAgdGhpcy5yZXN1bHRzID0gcmVzdWx0czsgXHJcbiAgICAvLyBBbnkgcHJlcmVxdWlzaXRlIGl0ZW1zIG5lZWRlZCB0byBkbyB0aGUgcHJvbXB0P1xyXG4gICAgdGhpcy5yZXF1aXJlbWVudHMgPSByZXF1aXJlbWVudHM7IFxyXG4gIH1cclxuXHJcbiAgLy8gQ2hlY2sgaWYgaW5wdXQgbWVzc2FnZSBtYXRjaGVzIGFueSBwcm9tcHQga2V5d29yZHNcclxuICBtYXRjaEtleXdvcmRzKG1lc3NhZ2UsIGl0ZW1zID0gW10pIHtcclxuICAgIGxldCBmb3VuZEtleXdvcmQgPSBmYWxzZTtcclxuICAgIC8vIElmIHdlIGhhdmUgYW55IGl0ZW0gcmVxdWlyZW1lbnRzXHJcbiAgICBpZiAodGhpcy5yZXF1aXJlbWVudHMubGVuZ3RoID4gMCkge1xyXG4gICAgICBsZXQgbWlzc2luZ1JlcXVpcmVtZW50cyA9IFtdO1xyXG4gICAgICAvLyBDaGVjayBhbGwgdGhlIHJlcXVpcmVtZW50cyBhZ2FpbnN0IHRoZSBpdGVtcyBwYXNzZWRcclxuICAgICAgdGhpcy5yZXF1aXJlbWVudHMuZm9yRWFjaChmdW5jdGlvbihyZXF1aXJlbWVudCkge1xyXG4gICAgICAgIGxldCBmb3VuZFJlcXVpcmVtZW50ID0gZmFsc2U7XHJcbiAgICAgICAgaXRlbXMuZm9yRWFjaChmdW5jdGlvbihpdGVtKSB7XHJcbiAgICAgICAgICBpZiAoaXRlbSA9PT0gcmVxdWlyZW1lbnQpIHtcclxuICAgICAgICAgICAgZm91bmRSZXF1aXJlbWVudCA9IHRydWU7XHJcbiAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgLy8gSWYgYSByZXF1aXJlbWVudCBpc24ndCBmb3VuZCBhZGQgdGhhdCBhIGxpc3RcclxuICAgICAgICBpZiAoIWZvdW5kUmVxdWlyZW1lbnQpIHtcclxuICAgICAgICAgIG1pc3NpbmdSZXF1aXJlbWVudHMucHVzaChyZXF1aXJlbWVudCk7XHJcbiAgICAgICAgfVxyXG4gICAgICB9KTtcclxuICAgICAgLy8gUmV0dXJuIGZhaWwgbWVzc2FnZSB3aXRoIG1pc3NpbmcgaXRlbSByZXF1aXJlbWVudHNcclxuICAgICAgaWYgKG1pc3NpbmdSZXF1aXJlbWVudHMubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIHJldHVybiB7J2ZhaWwnOiBtaXNzaW5nUmVxdWlyZW1lbnRzfTtcclxuICAgICAgfVxyXG4gICAgfVxyXG4gICAgLy8gSWYgd2UgaGF2ZSBhbGwgb3VyIGl0ZW0gcmVxdWlyZW1lbnRzLCBjaGVjayB0aGUgdXNlcidzIG1lc3NhZ2VcclxuICAgIC8vIHRvIHNlZSBpZiB3ZSBmaW5kIGFueSBtYXRjaGluZyBrZXl3b3Jkc1xyXG4gICAgdGhpcy5rZXl3b3Jkcy5mb3JFYWNoKGZ1bmN0aW9uKGtleXdvcmQpIHtcclxuICAgICAgaWYgKG1lc3NhZ2UuaW5jbHVkZXMoa2V5d29yZC50b0xvd2VyQ2FzZSgpKSkge1xyXG4gICAgICAgIGZvdW5kS2V5d29yZCA9IHRydWU7XHJcbiAgICAgIH1cclxuICAgIH0pO1xyXG4gICAgLy8gS2V5d29yZHMgaGF2ZSBiZWVuIG1hdGNoZWQgZnJvbSB0aGUgdXNlciBpbnB1dCwgc28gcmV0dXJuIHJlc3VsdHMgb2YgcHJvbXB0XHJcbiAgICBpZiAoZm91bmRLZXl3b3JkKSB7XHJcbiAgICAgIHJldHVybiB7J3N1Y2Nlc3MnOiB0aGlzLnJlc3VsdHN9O1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIG51bGw7XHJcbiAgfVxyXG59XHJcbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEl0ZW0ge1xyXG4gICBcclxuICBjb25zdHJ1Y3RvcihuYW1lID0gJycsIGdldFRleHQgPSAnJykge1xyXG4gICAgdGhpcy5uYW1lID0gbmFtZTtcclxuICAgIHRoaXMuZ2V0VGV4dCA9IGdldFRleHQ7IC8vIFRleHQgZGlzcGxheWVkIHdoZW4gaXRlbSBpcyBnb3R0ZW5cclxuICB9XHJcblxyXG4gIGdldCgpIHtcclxuICAgIHJldHVybiB0aGlzLmdldFRleHQ7XHJcbiAgfVxyXG59XHJcbiJdLCJzb3VyY2VSb290IjoiIn0=